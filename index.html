<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Lesehan Macca - Menu Ceria</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-grad: linear-gradient(135deg, #FF4B2B 0%, #FF416C 100%);
            --secondary-grad: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            --accent-grad: linear-gradient(135deg, #43E97B 0%, #38F9D7 100%);
            --bg: #fdfdfd;
            --card: #ffffff;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --radius: 20px;
        }

        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }

        body {
            margin: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg);
            color: var(--text-dark);
            padding-bottom: 140px;
            overflow-x: hidden;
        }

        /* HEADER */
        header {
            background: #fff;
            padding: 25px 20px;
            text-align: center;
            border-bottom: 1px solid #f1f1f1;
        }
        header h1 { 
            margin: 0; 
            font-size: 24px; 
            font-weight: 800; 
            background: var(--primary-grad);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -1px;
        }
        header p { margin: 5px 0 0; font-size: 12px; color: var(--text-light); font-weight: 500; }

        /* TABS - Optimized for Mobile Swipe */
        .tabs-container {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 100;
            padding: 12px 0;
            display: flex;
            justify-content: flex-start;
            gap: 10px;
            overflow-x: auto;
            padding-left: 20px;
            padding-right: 20px;
            border-bottom: 1px solid #f1f1f1;
            scrollbar-width: none;
        }
        .tabs-container::-webkit-scrollbar { display: none; }
        
        .tab-link {
            white-space: nowrap;
            padding: 10px 20px;
            background: #f1f2f6;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 700;
            color: var(--text-light);
            cursor: pointer;
            border: none;
            transition: 0.3s;
        }
        .tab-link.active {
            background: var(--primary-grad);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 65, 108, 0.3);
        }

        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .menu-section { display: none; }
        .menu-section.active { display: block; animation: slideUp 0.4s ease forwards; }

        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(15px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .section-title { font-size: 18px; font-weight: 800; margin: 10px 0 20px; display: flex; align-items: center; gap: 10px; }

        .menu-grid { display: grid; gap: 15px; }
        .menu-card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 6px 18px rgba(0,0,0,0.03);
            border: 1px solid #f9f9f9;
        }
        .menu-info h4 { margin: 0 0 4px; font-size: 15px; font-weight: 700; color: #2d3436; }
        .menu-info p { margin: 0; font-size: 14px; color: #FF416C; font-weight: 800; }

        .add-btn {
            background: var(--secondary-grad);
            color: white;
            border: none;
            width: 42px;
            height: 42px;
            border-radius: 14px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }

        /* FLOATING CART BAR */
        .cart-bar {
            position: fixed;
            bottom: 20px; left: 15px; right: 15px;
            max-width: 500px; margin: 0 auto;
            background: #2d3436;
            border-radius: 22px;
            padding: 14px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            z-index: 1000;
            transform: translateY(150%);
            transition: 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        .cart-bar.active { transform: translateY(0); }
        .checkout-btn {
            background: var(--primary-grad);
            color: white;
            border: none;
            padding: 12px 22px;
            border-radius: 14px;
            font-weight: 800;
            font-size: 14px;
        }

        /* POPUP */
        .popup {
            position: fixed; inset: 0;
            background: rgba(0, 0, 0, 0.6);
            display: none; z-index: 2000;
            align-items: flex-end;
        }
        .popup.active { display: flex; }
        .popup-content {
            background: #fff; width: 100%; max-width: 600px;
            margin: 0 auto; border-radius: 30px 30px 0 0;
            padding: 25px; max-height: 90vh; overflow-y: auto;
            animation: sheetUp 0.3s ease-out;
        }
        @keyframes sheetUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .input-group { margin-bottom: 18px; }
        .input-group label { display: block; font-size: 11px; font-weight: 800; color: #b2bec3; margin-bottom: 8px; text-transform: uppercase; }
        input, select, textarea {
            width: 100%; padding: 15px; border: 2px solid #f1f2f6;
            border-radius: 16px; font-family: inherit; font-weight: 600; font-size: 15px;
        }
        textarea { height: 80px; resize: none; }

        .cart-item-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 0; border-bottom: 1px solid #f8f9fa;
        }
        .qty-control {
            display: flex; align-items: center; gap: 15px;
            background: #f1f2f6; padding: 6px 14px; border-radius: 50px;
        }
        .qty-btn { background: none; border: none; color: var(--primary); font-size: 22px; font-weight: 800; }

        .payment-summary {
            background: #fdfdfd; border-radius: 20px;
            padding: 20px; margin: 25px 0; border: 2px dashed #f1f2f6;
        }
        .summary-line { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; font-weight: 600; }
        .summary-line.total { margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; font-weight: 800; font-size: 20px; }

        .btn-pesan {
            width: 100%; background: var(--accent-grad); color: #1d3924; border: none;
            padding: 20px; border-radius: 18px; font-weight: 800; font-size: 16px;
            box-shadow: 0 8px 20px rgba(67, 233, 123, 0.3);
        }
    </style>
</head>
<body>

<header>
    <h1>LESEHAN MACCA</h1>
    <p>Jl. Poros Malino ‚Ä¢ 10:00 - 22:00</p>
</header>

<div class="tabs-container" id="tabBar">
    <button class="tab-link active" onclick="openTab(event, 'ayam')">üçó Ayam</button>
    <button class="tab-link" onclick="openTab(event, 'ikan')">üêü Ikan</button>
    <button class="tab-link" onclick="openTab(event, 'udang')">üç§ Udang</button>
    <button class="tab-link" onclick="openTab(event, 'nasimie')">üçö Nasi & Mie</button>
    <button class="tab-link" onclick="openTab(event, 'sayur')">ü•¨ Sayur</button>
</div>

<div class="container">
    <div id="ayam" class="menu-section active">
        <div class="section-title"><span>üçó</span> Menu Ayam</div>
        <div class="menu-grid">
            <div class="menu-card"><div class="menu-info"><h4>Ayam Bakar Macca</h4><p>Rp 14.000</p></div><button class="add-btn" onclick="addItem('Ayam Bakar Macca', 14000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Ayam Goreng Macca</h4><p>Rp 14.000</p></div><button class="add-btn" onclick="addItem('Ayam Goreng Macca', 14000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Ayam Goreng Tepung</h4><p>Rp 16.000</p></div><button class="add-btn" onclick="addItem('Ayam Goreng Tepung', 16000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Ayam Saos Mentega</h4><p>Rp 17.000</p></div><button class="add-btn" onclick="addItem('Ayam Saos Mentega', 17000)">+</button></div>
        </div>
    </div>

    <div id="ikan" class="menu-section">
        <div class="section-title"><span>üêü</span> Menu Ikan</div>
        <div class="menu-grid">
            <div class="menu-card"><div class="menu-info"><h4>Bandeng Bakar</h4><p>Rp 13.000</p></div><button class="add-btn" onclick="addItem('Bandeng Bakar', 13000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Pallumara Bandeng</h4><p>Rp 20.000</p></div><button class="add-btn" onclick="addItem('Pallumara Bandeng', 20000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Kakap / Katamba</h4><p>Rp 30.000</p></div><button class="add-btn" onclick="addItem('Kakap / Katamba', 30000)">+</button></div>
        </div>
    </div>

    <div id="udang" class="menu-section">
        <div class="section-title"><span>üç§</span> Menu Udang</div>
        <div class="menu-grid">
            <div class="menu-card"><div class="menu-info"><h4>Udang Bakar</h4><p>Rp 28.000</p></div><button class="add-btn" onclick="addItem('Udang Bakar', 28000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Udang Goreng Tepung</h4><p>Rp 30.000</p></div><button class="add-btn" onclick="addItem('Udang Goreng Tepung', 30000)">+</button></div>
        </div>
    </div>

    <div id="nasimie" class="menu-section">
        <div class="section-title"><span>üçö</span> Nasi & Mie</div>
        <div class="menu-grid">
            <div class="menu-card"><div class="menu-info"><h4>Nasi Goreng Biasa</h4><p>Rp 15.000</p></div><button class="add-btn" onclick="addItem('Nasi Goreng Biasa', 15000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Mie Goreng / Kering</h4><p>Rp 15.000</p></div><button class="add-btn" onclick="addItem('Mie Goreng / Kering', 15000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Nasi Putih</h4><p>Rp 5.000</p></div><button class="add-btn" onclick="addItem('Nasi Putih', 5000)">+</button></div>
        </div>
    </div>

    <div id="sayur" class="menu-section">
        <div class="section-title"><span>ü•¨</span> Sayur</div>
        <div class="menu-grid">
            <div class="menu-card"><div class="menu-info"><h4>Cah Kangkung</h4><p>Rp 8.000</p></div><button class="add-btn" onclick="addItem('Cah Kangkung', 8000)">+</button></div>
            <div class="menu-card"><div class="menu-info"><h4>Tahu/Tempe Goreng</h4><p>Rp 7.000</p></div><button class="add-btn" onclick="addItem('Tahu/Tempe Goreng', 7000)">+</button></div>
        </div>
    </div>
</div>

<div class="cart-bar" id="cartBar">
    <div style="display:flex; align-items:center; gap:12px;">
        <div style="background:rgba(255,255,255,0.15); padding:8px 14px; border-radius:12px; font-weight:800;" id="itemCount">0</div>
        <strong id="totalText">Rp 0</strong>
    </div>
    <button class="checkout-btn" onclick="openPopup()">Review Pesanan</button>
</div>

<div class="popup" id="popup">
    <div class="popup-content">
        <div style="width: 50px; height: 6px; background: #eee; margin: 0 auto 20px; border-radius: 10px;"></div>
        <h3 style="margin: 0 0 20px; font-weight: 800;">Review Pesanan</h3>
        
        <div class="input-group"><label>Nama Pemesan</label><input id="nama" type="text"></div>
        <div class="input-group"><label>Nomor WhatsApp</label><input id="telp" type="tel"></div>
        <div class="input-group"><label>Alamat Pengiriman</label><textarea id="alamat"></textarea></div>
        <div class="input-group">
            <label>Metode Pembayaran</label>
            <select id="bayar" onchange="renderCart()">
                <option value="COD">üíµ COD (Bayar di Tempat)</option>
                <option value="Transfer">üè¶ Transfer Bank</option>
            </select>
        </div>

        <div id="cartList"></div>

        <div class="payment-summary">
            <div class="summary-line"><span>Subtotal Menu</span><span id="subtotalText">Rp 0</span></div>
            <div class="summary-line" id="ongkirLine"><span>Ongkir</span><span>Rp 5.000</span></div>
            <div class="summary-line total"><span>Total Bayar</span><span id="popupTotal" style="color:#FF416C;">Rp 0</span></div>
        </div>

        <button class="btn-pesan" onclick="sendWA()">PESAN SEKARANG</button>
        <button onclick="closePopup()" style="width:100%; background:none; border:none; color:#999; margin-top:20px; font-weight:700;">Kembali Belanja</button>
    </div>
</div>

<script>
    let cart = [];
    const ongkirVal = 5000;
    const adminWA = '6285242522956';

    function openTab(evt, tabName) {
        const sections = document.getElementsByClassName("menu-section");
        for (let s of sections) s.classList.remove("active");
        const tabs = document.getElementsByClassName("tab-link");
        for (let t of tabs) t.classList.remove("active");
        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.classList.add("active");
        
        // Auto scroll tab center
        evt.currentTarget.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
    }

    function formatRupiah(n) { return n.toLocaleString('id-ID'); }

    function addItem(name, price) {
        cart.push({ name, price });
        updateUI();
        if(document.getElementById('popup').style.display === 'flex') renderCart();
    }

    function removeItem(name, price) {
        const index = cart.findIndex(i => i.name === name && i.price === price);
        if (index > -1) {
            cart.splice(index, 1);
            updateUI();
            renderCart();
            if(cart.length === 0) closePopup();
        }
    }

    function updateUI() {
        const total = cart.reduce((s, i) => s + i.price, 0);
        document.getElementById('cartBar').classList.toggle('active', cart.length > 0);
        document.getElementById('totalText').innerText = `Rp ${formatRupiah(total)}`;
        document.getElementById('itemCount').innerText = cart.length;
    }

    function openPopup() {
        renderCart();
        document.getElementById('popup').style.display = 'flex';
        setTimeout(() => document.getElementById('popup').classList.add('active'), 10);
    }

    function closePopup() { 
        document.getElementById('popup').classList.remove('active');
        setTimeout(() => document.getElementById('popup').style.display = 'none', 300);
    }

    function renderCart() {
        const list = document.getElementById('cartList');
        list.innerHTML = '';
        let subtotal = 0;
        const itemMap = {};
        
        cart.forEach(i => {
            itemMap[i.name] = itemMap[i.name] || { ...i, qty: 0 };
            itemMap[i.name].qty++;
            subtotal += i.price;
        });

        Object.values(itemMap).forEach(item => {
            const div = document.createElement('div');
            div.className = 'cart-item-row';
            div.innerHTML = `
                <div><div style="font-weight:700;">${item.name}</div><div style="color:#FF416C; font-weight:800; font-size:13px;">Rp ${formatRupiah(item.price)}</div></div>
                <div class="qty-control">
                    <button class="qty-btn" onclick="removeItem('${item.name}', ${item.price})">‚àí</button>
                    <span style="font-weight:800;">${item.qty}</span>
                    <button class="qty-btn" onclick="addItem('${item.name}', ${item.price})">+</button>
                </div>`;
            list.appendChild(div);
        });

        const method = document.getElementById('bayar').value;
        const currentOngkir = (method === 'COD') ? ongkirVal : 0;
        document.getElementById('ongkirLine').style.display = (method === 'COD') ? 'flex' : 'none';
        document.getElementById('subtotalText').innerText = `Rp ${formatRupiah(subtotal)}`;
        document.getElementById('popupTotal').innerText = `Rp ${formatRupiah(subtotal + currentOngkir)}`;
    }

    function sendWA() {
        const nama = document.getElementById('nama').value;
        const telp = document.getElementById('telp').value;
        const alamat = document.getElementById('alamat').value;
        const method = document.getElementById('bayar').value;

        if(!nama || !telp || !alamat) return alert("Lengkapi data Anda!");

        let subtotal = 0;
        const itemMap = {};
        cart.forEach(i => {
            itemMap[i.name] = itemMap[i.name] || { ...i, qty: 0 };
            itemMap[i.name].qty++;
            subtotal += i.price;
        });

        const total = subtotal + (method === 'COD' ? ongkirVal : 0);
        let msg = `*PESANAN BARU - LESEHAN MACCA*%0A%0A`;
        msg += `*Penerima:* ${nama}%0A*WA:* ${telp}%0A*Alamat:* ${alamat}%0A*Bayar:* ${method}%0A%0A*Menu:*%0A`;
        Object.values(itemMap).forEach(i => msg += `- ${i.name} (${i.qty}x)%0A`);
        msg += `%0A*TOTAL: Rp ${formatRupiah(total)}*`;

        window.open(`https://wa.me/${adminWA}?text=${msg}`, '_blank');
    }
</script>
</body>
</html>
